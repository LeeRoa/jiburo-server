spring.application.name=jiburo-server

# ==========================================
# 1. Internationalization (i18n) 설정 (기존 내용)
# ==========================================
spring.messages.encoding=UTF-8
spring.messages.always-use-message-format=true
spring.messages.fallback-to-system-locale=false

# ==========================================
# 2. Server & Log 설정
# ==========================================
server.port=8080
spring.servlet.encoding.charset=UTF-8
spring.servlet.encoding.force=true

# 우리 프로젝트 로그는 DEBUG 레벨로 자세히 보기
logging.level.com.jiburo=DEBUG

# ==========================================
# 3. Database 설정 (H2 In-Memory)
# ==========================================
# DB 접속 URL (메모리 모드)
spring.datasource.url=jdbc:h2:mem:jiburodb;MODE=MySQL
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# H2 콘솔 사용 설정 (웹 브라우저에서 DB 확인용)
# 접속 주소: http://localhost:8080/h2-console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# ==========================================
# 4. JPA (Hibernate) 설정
# ==========================================
# 서버 시작 시 Entity를 보고 테이블을 자동 생성 (update: 변경분만 반영, create: 매번 새로 생성)
# 초기 개발 단계에서는 update가 편합니다.
spring.jpa.hibernate.ddl-auto=update

# 콘솔에 실행되는 SQL 보여주기
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# OSIV 설정 (성능 최적화를 위해 false 권장,
# false 시 Service 계층 벗어나면 Lazy Loading 불가 - 트랜잭션 관리 철저히 필요)
spring.jpa.open-in-view=false

# ==========================================
# 5. Security 임시 설정
# ==========================================
# SecurityConfig를 만들기 전까지 사용할 임시 계정입니다.
# 이게 없으면 매번 서버 켤 때마다 콘솔에 뜨는 랜덤 비밀번호를 찾아야 합니다.
spring.security.user.name=user
spring.security.user.password=1234

# ==========================================
# JWT 설정
# ==========================================
# HS256 알고리즘을 사용하므로, 32byte(영문 32자) 이상이어야 안전합니다.
# 임의의 긴 문자열을 입력해주세요.
jwt.secret=c2lsdmVybmluZS10ZWNoLXNwcmluZy1ib290LWp3dC10dXRvcmlhbC1zZWNyZXQtc2lsdmVybmluZS10ZWNoLXNwcmluZy1ib290LWp3dC10dXRvcmlhbC1zZWNyZXQK

# Access Token 유효시간: 30분 (1000 * 60 * 30)
jwt.access-token-validity-in-seconds=1800000

# Refresh Token 유효시간: 14일 (1000 * 60 * 60 * 24 * 14)
jwt.refresh-token-validity-in-seconds=1209600000

# ==========================================
# OAuth2 리다이렉트 설정 (프론트엔드 주소)
# ==========================================
# 로그인 성공 후 토큰을 전달할 프론트엔드 주소
app.oauth2.authorized-redirect-uri=http://localhost:3000/oauth/callback

# ==========================================
# OAuth2 - Kakao 설정
# ==========================================
# [1] Registration (내 앱 정보)
# client-id: 카카오 디벨로퍼스 [요약 정보] -> [REST API 키] 붙여넣기
spring.security.oauth2.client.registration.kakao.client-id=e2d45e803b2098bf8ccb454bde2edc88

# client-secret: 카카오 디벨로퍼스 [카카오 로그인] -> [보안] -> [Client Secret] 코드
spring.security.oauth2.client.registration.kakao.client-secret=cKpJ8L1CfDw6OrwrtVHnSIFBhVwkJ5uK

# 카카오는 POST 방식으로 인증 정보를 보냅니다.
spring.security.oauth2.client.registration.kakao.client-authentication-method=client_secret_post

# 카카오 인증 서버가 우리 서버로 코드를 돌려줄 주소 (개발자 센터에 등록한 것과 100% 일치해야 함)
spring.security.oauth2.client.registration.kakao.redirect-uri=http://localhost:8080/login/oauth2/code/kakao

# 인증 방식 및 요청할 정보 범위
spring.security.oauth2.client.registration.kakao.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.kakao.scope=profile_nickname, profile_image, account_email
spring.security.oauth2.client.registration.kakao.client-name=Kakao

# [2] Provider (카카오 서버 정보 - 스프링은 구글, 페북 말고는 주소를 몰라서 알려줘야 함)
spring.security.oauth2.client.provider.kakao.authorization-uri=https://kauth.kakao.com/oauth/authorize
spring.security.oauth2.client.provider.kakao.token-uri=https://kauth.kakao.com/oauth/token
spring.security.oauth2.client.provider.kakao.user-info-uri=https://kapi.kakao.com/v2/user/me
spring.security.oauth2.client.provider.kakao.user-name-attribute=id